# データ管理について
研究で生じるデータ管理についてまとめる.  
揮発防止・作業保全の観点で常々google driveと同期する.  
一方, 「常々同期したままのもの」と, 適宜「事後に共有ドライブに最終版移すもの」に分けて管理する.  
大まかには以下の流れ:  
1. google workspaceの設定  
2. パソコン版google driveの導入  
3. バックアップの設定  
4. 確認作業  

******
### <u>**1. Google workspaceの設定**</u>
以下を参照して大学で購入しているGoogle workspaceに登録する.  
[参照先](https://www.ecc.u-tokyo.ac.jp/files/ECCS_Cloud_Mail_User_Manual.pdf)  
* 登録してから使用可能になるまでに若干ラグがある  
* パスワードの再設定が年に一回程度のペースで求められるので注意  

******
### <u>**2. パソコン版google driveのDL・インストール**</u>
google workspaceを使ってデータを自動でバックアップする.  
以前は二種類あったが, 2021年8月現在はパソコン版google driveに統一されたので, パソコン版google driveを使用する.  
適当なサイトを参照してDL・インストール導入する.  
[参照例](https://support.google.com/a/answer/7491144?hl=ja)  

******
### <u>**3. バックアップの設定**</u>
### **3-1. cacheの移動**
google driveのGUIからできる (2021/9/22, Nemoto S).  
- Dドライブにキャッシュ保存用のフォルダを作る (ex. D:\DriveFS)  
- タスクトレイのgoogle driveアイコンをクリック  
- 右上の歯車をクリック  
- 設定をクリック  
- さらに右上の歯車をクリック  
- 「ローカルにキャッシュされたファイルのディレクトリ」を変更して上記作成したフォルダを指定する  
- google driveの再起動  
- 以上によりgoogle driveの実体をDドライブに変更できる (容量的に必須)  

### **3-2. 保存用ディレクトリの確認**
水野が事前に共有ドライブを大学アカウントに用意している (用意されていない場合には水野に問い合わせ).  
googleドライブ内の共有ドライブにデータ保存用のディレクトリがあることを確認する (以下, 保存用ディレクトリとする).  
以下の命名規則となっている.  
``` {ラボへの入学年度}_{苗字}{名前の頭文字} ```  
例えば水野の場合は以下のようになる.  
``` 2008_MizunoT ```  
ディレクトリ内は以下のように配置となっている.  


    2008_MizunoT  
        ├─Conference：学会関連情報
        ├─Document：学振などの申請書
        ├─Discussion：ディスカッション資料
        ├─Notebook：実験内容
        ├─Publication：論文化用の内容
        ├─Slide：セミナー資料
        └─Survey：サーベイ時の資料


以下のように使い方が違うので注意.  
- 常々同期したままのもの  
    - Discussion  
    - Notebook  
- 事後に共有ドライブに最終版移すもの  
    - Conference：学会終了時に整理して移動  
    - Document：学振など申請後に整理して移動
    - Publication：論文採択後に整理して移動  
    - Slide：セミナー終了後に整理して移動  
    - Survey：サーベイ終了後に整理して移動  


### **3-3. シンボリックリンクによるユーザビリティ向上**
共有ドライブ上に保存ディレクトリを作成することで、バックアップが容易になる。しかしGドライブ経由のパスは煩わしい('共有ドライブ'という日本語が入る点など)。そこで、共有ドライブ上にバックアップデータを蓄積しつつ、それらをDドライブにシンボリックリンクを通し、Dドライブ経由でアクセスできるようにする。因みにDドライブにGドライブの```ショートカット```を作成してもパスはGドライブのままなので、```シンボリックリンク```である点が肝要。

1. 管理者としてコマンドプロンプトを起動し、``` C:\WINDOWS\system32>mklink /D D:シンボル先 G:共有ドライブ\Year_Name ```  のようにコマンドを叩く。例えば、私の場合は、```C:\WINDOWS\system32>mklink /D D:GdriveSymbol G:共有ドライブ\2020_AzumaI```となり、```D:GdriveSymbol <<===>> G:共有ドライブ\2020_AzumaI のシンボリック リンクが作成されました```のようなメッセージが表示されたら完了。
2. こうすることで、```G:共有ドライブ\2020_AzumaI\notebook\data.txt```について```D:GdriveSymbol\notebook\data.txt```で参照することが可能になり、Dドライブからパスが取得可能になる。また共有ドライブ先でもシンボリックリンク先でもファイル操作はどちらも反映されるため便利。

- 日々の作業は保存用ディレクトリである```G:共有ドライブ\Year_Name```上で行う。上記によりここへのパスによるアクセスが楽になる。  
- この逆の操作である、Gドライブ上にDドライブのシンボリックリンクを通す操作はエラーが出力されて現状無理っぽい。
- cacheの移動でデフォルトのCドライブからDドライブに移行しないと容量の制限が厳しくなるので注意。
(2021/01/26 Azuma I)  

******
### <u>**4. バックアップの確認**</u>
1. 保存用ディレクトリ内でテキトーにファイルを一つ作成する  
2. クラウド上のgoogle driveを開き, 自身の名前の共有ドライブ内に作成したファイルが見えるかどうかを確認する  

******
### **更新情報**
- 230607 [tadahayamiz](https://github.com/tadahayamiz)  